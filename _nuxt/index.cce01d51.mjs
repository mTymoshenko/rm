import{a as b,r as x,P as S,a1 as U,o as f,l as w,f as a,a2 as F,p as P,u as t,c as y,w as s,e as g,t as h,h as R,A,F as B,a3 as N,E,j,k as C,a4 as G,b as $,m as z}from"./entry.eacab362.mjs";import{_ as D}from"./_plugin-vue_export-helper.7287ed4b.mjs";import{v as Y,E as M,g as H,a as K}from"./directive.02f50d27.mjs";import{E as p,a as O,b as Q,c as I,d as V}from"./index.8970c4f5.mjs";import{E as J}from"./index.d87888ae.mjs";import"./index.2d746604.mjs";import"./index.766ec657.mjs";const W={class:"filter-bar"},X=b({__name:"FilterBarCharacters",props:{filter:null},emits:["update:filter"],setup(i,{emit:n}){const c=i,l=x({name:"",status:"",species:"",type:"",gender:""});S(()=>({...c.filter}),u=>Object.keys(u).length?l.value=u:null,{immediate:!0});const d=()=>n("update:filter",{...l.value});return(u,o)=>{const e=U("FormKit");return f(),w("div",W,[a(e,{modelValue:l.value.name,"onUpdate:modelValue":o[0]||(o[0]=r=>l.value.name=r),label:"Name",placeholder:"Rick Sanchez",name:"name"},null,8,["modelValue"]),a(e,{modelValue:l.value.species,"onUpdate:modelValue":o[1]||(o[1]=r=>l.value.species=r),label:"Species",placeholder:"Human",name:"species"},null,8,["modelValue"]),a(e,{modelValue:l.value.status,"onUpdate:modelValue":o[2]||(o[2]=r=>l.value.status=r),type:"select",label:"Status",placeholder:"Alive",name:"status",options:["alive","dead","unknown"]},null,8,["modelValue"]),a(e,{modelValue:l.value.gender,"onUpdate:modelValue":o[3]||(o[3]=r=>l.value.gender=r),type:"select",label:"Gender",name:"gender",placeholder:"male",options:["male","female","genderless","unknown"]},null,8,["modelValue"]),a(e,{modelValue:l.value.type,"onUpdate:modelValue":o[4]||(o[4]=r=>l.value.type=r),label:"Type",placeholder:"Unknown",name:"type"},null,8,["modelValue"]),a(e,{style:{width:"100%"},type:"button",label:"Search",onClick:d})])}}}),Z=D(X,[["__scopeId","data-v-02c7b322"]]),q=b({__name:"GridCharacters",props:{page:null,loading:{type:Boolean},totalRows:null,characters:null},emits:["update:page"],setup(i,{emit:n}){const c=i,l=x(1);F(()=>l.value=c.page);const m=d=>n("update:page",d);return(d,u)=>{const o=N;return f(),w(B,null,[P((f(),y(t(Q),{data:i.characters,style:{width:"100%"},height:"65vh",stripe:"",border:""},{default:s(()=>[a(t(p),{prop:"id",label:"id",width:"50"}),a(t(p),{prop:"name",label:"Name",width:"250"},{default:s(({row:e})=>[a(o,{to:`/characters/${e.id}`,style:{"text-decoration":"none"}},{default:s(()=>[a(t(O),{type:"primary"},{default:s(()=>[g(h(e.name),1)]),_:2},1024)]),_:2},1032,["to"])]),_:1}),a(t(p),{prop:"image",label:"Avatar",width:"80"},{default:s(({row:e})=>[a(t(J),{size:50,src:e.image},null,8,["src"])]),_:1}),a(t(p),{prop:"species",label:"Species",width:"100"}),a(t(p),{prop:"created",label:"Created",sortable:""},{default:s(({row:e})=>[g(h(t(R)(e.created).format("MM/DD/YYYY")),1)]),_:1}),a(t(p),{prop:"gender",label:"Gender",width:"100"}),a(t(p),{prop:"status",label:"Status",width:"100",align:"center"},{default:s(({row:e})=>[a(t(M),{type:t(H)(e.status),effect:"dark",round:"",size:"large"},{default:s(()=>[g(h(e.status),1)]),_:2},1032,["type"])]),_:1}),a(t(p),{prop:"location",label:"Location"},{default:s(({row:e})=>[g(h(e.location.dimension),1)]),_:1}),a(t(p),{prop:"type",label:"Type"},{default:s(({row:e})=>[g(h(e.type||"Unknown"),1)]),_:1})]),_:1},8,["data"])),[[t(Y),i.loading]]),i.characters.length?(f(),y(t(I),{key:0,currentPage:l.value,"onUpdate:currentPage":u[0]||(u[0]=e=>l.value=e),style:{"margin-top":"15px","justify-content":"center"},"page-size":20,background:!0,layout:"total, prev, pager, next, jumper",total:i.totalRows,onCurrentChange:m},null,8,["currentPage","total"])):A("",!0)],64)}}}),ee=i=>{const n=E({...i,...i.filter&&{filter:{...i.filter}}}),{result:c,loading:l,error:m}=j(G,n),d=C(()=>{var e,r;return(r=(e=c.value)==null?void 0:e.characters.results)!=null?r:[]}),u=C(()=>{var e;return((e=c.value)==null?void 0:e.characters.info.count)||0});return{characters:d,loading:l,error:m,totalRows:u,updateCharactersList:e=>{e.page&&(n.page=e.page),e.filter&&(n.filter=e.filter)}}},te={class:"page-wrapper"},ae=$("h2",{style:{"text-align":"center"}},"The Rick and Morty characters as seen on the TV show",-1),pe=b({__name:"index",setup(i){const n=E({page:1,filter:{name:"",status:"",species:"",type:"",gender:""}}),{characters:c,loading:l,error:m,totalRows:d,updateCharactersList:u}=ee(n),o=r=>{n.page=r.page,n.filter=r.filter},e=r=>{o(r),u(r)};return(r,_)=>{const T=Z,k=z,L=q;return f(),w("div",te,[a(k,null,{fallback:s(()=>[a(t(V),{rows:1})]),default:s(()=>[a(T,{filter:n.filter,"onUpdate:filter":_[0]||(_[0]=v=>e({filter:v,page:1}))},null,8,["filter"])]),_:1}),ae,t(m)?(f(),y(t(K),{key:0,title:t(m).message,type:"error",effect:"dark","show-icon":""},null,8,["title"])):(f(),y(k,{key:1},{fallback:s(()=>[a(t(V),{rows:12})]),default:s(()=>[a(L,{page:n.page,loading:t(l),characters:t(c),"total-rows":t(d),"onUpdate:page":_[1]||(_[1]=v=>e({page:v,filter:{...n.filter}}))},null,8,["page","loading","characters","total-rows"])]),_:1}))])}}});export{pe as default};
