import{a as h,r as P,P as B,a1 as N,o as p,l as y,f as o,a2 as T,p as $,u as t,c as _,w as r,b as k,F as w,U as R,e as b,t as v,h as U,A as j,a3 as D,E as V,j as Y,k as C,au as A,m as G}from"./entry.eacab362.mjs";import{_ as M}from"./_plugin-vue_export-helper.7287ed4b.mjs";import{v as O,E as z,g as I,a as K}from"./directive.02f50d27.mjs";import{E as f,a as Q,b as H,c as J,d as L}from"./index.8970c4f5.mjs";import{c as W}from"./index.766ec657.mjs";import"./index.2d746604.mjs";const X={class:"filter-bar"},Z=h({__name:"FilterBarEpisodes",props:{filter:null},emits:["update:filter"],setup(n,{emit:l}){const u=n,s=P({name:"",episode:""});B(()=>({...u.filter}),i=>Object.keys(i).length?s.value=i:null,{immediate:!0});const c=()=>l("update:filter",{...s.value});return(i,d)=>{const e=N("FormKit");return p(),y("div",X,[o(e,{modelValue:s.value.name,"onUpdate:modelValue":d[0]||(d[0]=a=>s.value.name=a),label:"Name",placeholder:"Rick Sanchez",name:"name"},null,8,["modelValue"]),o(e,{modelValue:s.value.episode,"onUpdate:modelValue":d[1]||(d[1]=a=>s.value.episode=a),label:"Episode",placeholder:"S01E02",name:"episode"},null,8,["modelValue"]),o(e,{type:"button",label:"Search",onClick:c})])}}}),q=M(Z,[["__scopeId","data-v-695fa85d"]]),ee={style:{padding:"10px"}},te=k("h3",{style:{margin:"0"}},"Characters",-1),ae=h({__name:"GridEpisodes",props:{page:null,loading:{type:Boolean},totalRows:null,episodes:null},emits:["update:page"],setup(n,{emit:l}){const u=n,s=P(1);T(()=>s.value=u.page);const m=c=>l("update:page",c);return(c,i)=>{const d=D;return p(),y(w,null,[$((p(),_(t(H),{data:n.episodes,style:{width:"100%"},height:"65vh",stripe:"",border:""},{default:r(()=>[o(t(f),{type:"expand"},{default:r(({row:e})=>[k("div",ee,[te,(p(!0),y(w,null,R(e.characters,a=>(p(),_(t(W),{key:a.id,placement:"top-end",content:a.status,effect:"dark"},{default:r(()=>[o(t(z),{type:t(I)(a.status),effect:"dark",style:{margin:"10px 10px 0 0"}},{default:r(()=>[b(v(a.name),1)]),_:2},1032,["type"])]),_:2},1032,["content"]))),128))])]),_:1}),o(t(f),{prop:"id",label:"id",width:"50"}),o(t(f),{prop:"name",label:"Name",width:"300"},{default:r(({row:e})=>[o(d,{to:`/episodes/${e.id}`,style:{"text-decoration":"none"}},{default:r(()=>[o(t(Q),{type:"primary"},{default:r(()=>[b(v(e.name),1)]),_:2},1024)]),_:2},1032,["to"])]),_:1}),o(t(f),{prop:"air_date",label:"Air date",width:"200",sortable:""}),o(t(f),{prop:"episode",label:"Episode",width:"150",sortable:""}),o(t(f),{prop:"created",label:"Created",sortable:""},{default:r(({row:e})=>[b(v(t(U)(e.created).format("MM/DD/YYYY")),1)]),_:1})]),_:1},8,["data"])),[[t(O),n.loading]]),n.episodes.length?(p(),_(t(J),{key:0,currentPage:s.value,"onUpdate:currentPage":i[0]||(i[0]=e=>s.value=e),style:{"margin-top":"15px","justify-content":"center"},"page-size":20,background:!0,layout:"total, prev, pager, next, jumper",total:n.totalRows,onCurrentChange:m},null,8,["currentPage","total"])):j("",!0)],64)}}}),oe=n=>{const l=V({...n,...n.filter&&{filter:{...n.filter}}}),{result:u,loading:s,error:m}=Y(A,l),c=C(()=>{var e,a;return(a=(e=u.value)==null?void 0:e.episodes.results)!=null?a:[]}),i=C(()=>{var e;return((e=u.value)==null?void 0:e.episodes.info.count)||0});return{episodes:c,loading:s,error:m,totalRows:i,updateEpisodesList:e=>{e.page&&(l.page=e.page),e.filter&&(l.filter=e.filter)}}},le={class:"page-wrapper"},se=k("h2",{style:{"text-align":"center"}},"List of Rick and Morty episodes",-1),ce=h({__name:"index",setup(n){const l=V({page:1,filter:{name:"",episode:""}}),{episodes:u,loading:s,error:m,totalRows:c,updateEpisodesList:i}=oe(l),d=a=>{l.page=a.page,l.filter=a.filter},e=a=>{d(a),i(a)};return(a,g)=>{const F=q,x=G,S=ae;return p(),y("div",le,[o(x,null,{fallback:r(()=>[o(t(L),{rows:1})]),default:r(()=>[o(F,{filter:l.filter,"onUpdate:filter":g[0]||(g[0]=E=>e({filter:E,page:1}))},null,8,["filter"])]),_:1}),se,t(m)?(p(),_(t(K),{key:0,title:t(m).message,type:"error",effect:"dark","show-icon":""},null,8,["title"])):(p(),_(x,{key:1},{fallback:r(()=>[o(t(L),{rows:12})]),default:r(()=>[o(S,{page:l.page,loading:t(s),episodes:t(u),"total-rows":t(c),"onUpdate:page":g[1]||(g[1]=E=>e({page:E,filter:{...l.filter}}))},null,8,["page","loading","episodes","total-rows"])]),_:1}))])}}});export{ce as default};
